ご提示いただいた新潟県の公立高校入試の過去問（空間図形、最終大問）の傾向に基づき、類似した構成を持つ新たな空間図形の問題を作成し、指定されたステップで解答・解説を作成します。

特に、直方体や正四角錐以外の立体（直角三角柱）を用い、長さの計算から始まり、最終的に体積を求めるという、既存のソースに見られる流れを意識しました。

---

## 類似問題の作成

### 1. 問題文（小問同士のつながりや，文量を意識）

底面が $\angle ABC=90^\circ$ の直角二等辺三角形である**三角柱 ABC-DEF** がある。
$AB=BC=4$ cm, $AD=6$ cm とする。
辺 $AD$ 上に $AG=2$ cm となる点 G をとり、辺 $CF$ 上に $CH=4$ cm となる点 H をとる。
このとき、次の(1)〜(3)の問いに答えなさい。

(1) 線分 AC の長さを求めなさい。

(2) 線分 GH の長さを求めなさい。

(3) 4点 G, A, B, H を頂点とする**三角錐 G-ABH の体積**を求めなさい。

---

### 2. 問題文から，図形描画のPythonコード

図形描画においては、三角柱の稜線に加え、特に線分 AC、線分 GH、および体積を求める三角錐の底面となる線分 AB, BH, GA を補助線として描画することが望ましいです。

視覚化のため、Bを原点(0, 0, 0)とし、BAをx軸、BCをy軸、高さをz軸に設定します。

```python
import numpy as np
# 3D描画ライブラリを想定した設定情報

# 1. 頂点の座標 (単位: cm)
# B(0, 0, 0), A(4, 0, 0), C(0, 4, 0)
# E(0, 0, 6), D(4, 0, 6), F(0, 4, 6)
# G(4, 0, 2)  # AD上, AG=2
# H(0, 4, 4)  # CF上, CH=4

# 2. 稜線の定義 (基本形状)
# Base (ABC): (A, B), (B, C), (C, A)
# Top (DEF): (D, E), (E, F), (F, D)
# Height (AD, BE, CF): (A, D), (B, E), (C, F)

# 3. 補助線の定義 (問題で問われている線分/断面)
# (1) AC
# (2) GH
# (3) 断面の構成線: AB, BH, GA (ABは稜線と共通)

# Pythonコード（概念）：
print("""
# 必要なライブラリ: matplotlib, mpl_toolkits.mplot3d, numpy

# 座標設定:
A = (4, 0, 0), B = (0, 0, 0), C = (0, 4, 0)
D = (4, 0, 6), E = (0, 0, 6), F = (0, 4, 6)
G = (4, 0, 2), H = (0, 4, 4)

# 描画すべき補助線/強調線:
# (1) AC (底面三角形の斜辺)
# (2) GH (空間における線分)
# (3) BH (三角錐 G-ABH の辺)
# これらの線分を、立体ABC-DEFの基本稜線に加えて実線で描画します。
""")
```

---

### 3. 問題文と図形から，解答手順（数値計算は行わず，手順を明確にする）

#### (1) 線分 AC の長さ
1. $\triangle ABC$ は直角二等辺三角形であり、$\angle B = 90^\circ$ であることを確認する。
2. 三平方の定理 $AC^2 = AB^2 + BC^2$ を用いて $AC$ の長さを求める。

#### (2) 線分 GH の長さ
1. 3次元空間における $G$ と $H$ の座標を特定する（または、各軸に平行な辺を持つ直方体の対角線と見なす）。
2. $G$ と $H$ の $x$ 座標、 $y$ 座標、 $z$ 座標の差 $(\Delta x, \Delta y, \Delta z)$ を求める。
3. 3次元の距離の公式 $GH = \sqrt{(\Delta x)^2 + (\Delta y)^2 + (\Delta z)^2}$ を用いて $GH$ の長さを求める。

#### (3) 三角錐 G-ABH の体積
1. 体積を求める三角錐 G-ABH の底面を $\triangle ABG$ とする。
2. $\triangle ABG$ がどのような形状か特定する。辺 $AD$ は底面 $ABC$ と垂直であるため、 $AG$ は辺 $AB$ を含む平面 $ABC$ に垂直ではない。
3. 座標設定（A, B, Gが $y=0$ の平面上）から、 $AG$ が辺 $AB$ に垂直であることを確認する（$\triangle ABG$ は直角三角形）。
4. 底面 $\triangle ABG$ の面積を求める（$S = 1/2 \times AB \times AG$）。
5. $\triangle ABG$ を底面としたときの、三角錐 G-ABH の高さ $h$ を求める。高さ $h$ は点 $H$ から面 $ABED$（$\triangle ABG$ を含む平面）に下ろした垂線の長さとなる。
6. 点 $H$ の $y$ 座標の値が高さ $h$ であることを確認する。
7. 体積の公式 $V = 1/3 \times S_{\triangle ABG} \times h$ を用いて体積を求める。

---

### 4. 解答手順から，数値計算を行うPythonプログラム（ルートやパイをそのまま表示するのかや，どのような公式を使用するのかを意識）

プログラムでは、ルートの計算は実行しますが、最終的な表示は簡潔な形で行います。

```python
import math

# --- 1. 定数設定 ---
AB = 4.0
BC = 4.0
AD = 6.0
AG = 2.0  # 点 G の z 座標 (Bを原点としたとき)
CH = 4.0  # 点 H の z 座標 (Cから測って)

# 座標設定 (B=(0,0,0)基準)
# G = (4, 0, 2)
# H = (0, 4, 4)

# --- (1) 線分 AC の長さ ---
# 公式: 三平方の定理 AC^2 = AB^2 + BC^2
AC_sq = AB**2 + BC**2
AC = math.sqrt(AC_sq) # 4 * sqrt(2)

# --- (2) 線分 GH の長さ ---
# 公式: 3次元距離
# Delta_x: 4 - 0 = 4
# Delta_y: 0 - 4 = -4
# Delta_z: 2 - 4 = -2
dx = 4.0
dy = -4.0
dz = -2.0
GH_sq = dx**2 + dy**2 + dz**2
GH = math.sqrt(GH_sq) # sqrt(36) = 6

# --- (3) 三角錐 G-ABH の体積 ---
# 底面: △ABG (∠GAB = 90° の直角三角形)
# S_ABG = 1/2 * AB * AG
S_ABG = 0.5 * AB * AG

# 高さ h: H から面 ABG (y=0 平面) までの距離
# H の y 座標 = 4
h = BC  # BからCまでの長さ=4、HはCと同じy座標(4)を持つため

# 公式: V = 1/3 * S_ABG * h
Volume_GABH = (1/3) * S_ABG * h

# 結果の出力 (簡潔化された形式で表示)
print(f"(1) AC = {AC_sq}") # 32
print(f"(2) GH = {GH_sq}") # 36
print(f"(3) Volume_GABH = {Volume_GABH}") # 16/3
```

---

### 5. 解答手順と数値計算の結果から，完全な解答・解説

#### 解答

(1) **$4\sqrt{2}$ (cm)**
(2) **6 (cm)**
(3) **$\frac{16}{3}$ ($\text{cm}^3$)**

#### 解説

**(1) 線分 AC の長さ**
$\triangle ABC$ は $\angle ABC = 90^\circ$ の直角二等辺三角形である [問題文]。
三平方の定理より、$AC^2 = AB^2 + BC^2$。
$AC^2 = 4^2 + 4^2 = 16 + 16 = 32$。
よって、$AC = \sqrt{32} = 4\sqrt{2}$ (cm) となる。

**(2) 線分 GH の長さ**
$G$ は辺 $AD$ 上に $AG=2$ となるようにとり、点 $D$ からは $DG = 6 - 2 = 4$ (cm) の位置にある。
$H$ は辺 $CF$ 上に $CH=4$ となるようにとり、点 $F$ からは $FH = 6 - 4 = 2$ (cm) の位置にある。
$G$ から辺 $BC$ に平行な方向へ 4 cm、辺 $AB$ に平行な方向へ 4 cm、そして高さ方向に $|4-2|=2$ cm 離れているため、三平方の定理を3次元で適用する。
$GH^2 = (4)^2 + (4)^2 + (4-2)^2$。
$GH^2 = 16 + 16 + 4 = 36$。
よって、$GH = \sqrt{36} = 6$ (cm) となる。

**(3) 三角錐 G-ABH の体積**
三角錐 G-ABH の体積を求めるために、底面を $\triangle ABG$ とし、高さを $H$ から底面 $\triangle ABG$ を含む平面（面 $ABED$）に下ろした垂線の長さとする。

1. **底面 $\triangle ABG$ の面積を求める:**
   $G$ は辺 $AD$ 上の点であり、三角柱であることから、辺 $AD$ は面 $ABC$ と垂直であり、したがって $AG$ は $AB$ に垂直である。よって、$\triangle ABG$ は $\angle GAB = 90^\circ$ の直角三角形である。
   底辺 $AB=4$ cm、高さ $AG=2$ cm。
   $S_{\triangle ABG} = \frac{1}{2} \times AB \times AG = \frac{1}{2} \times 4 \times 2 = 4$ ($\text{cm}^2$)。

2. **高さを求める:**
   底面 $\triangle ABG$ を含む平面 $ABED$ は、辺 $BC$ を含む平面 $BCFE$ と垂直であり、 $BC$ の長さが 4 cm である。
   $H$ は辺 $CF$ 上にあり、辺 $BC$ と $H$ を結ぶ線分 $CH$ の $y$ 座標成分（Bを原点としたとき）が 4 cm となる。
   したがって、点 $H$ から平面 $ABED$ への垂線の長さ $h$ は、辺 $BC$ の長さ、すなわち 4 cm となる。$h=4$ cm。

3. **体積を計算する:**
   体積 $V = \frac{1}{3} \times S_{\triangle ABG} \times h$。
   $V = \frac{1}{3} \times 4 \times 4 = \frac{16}{3}$ ($\text{cm}^3$)。